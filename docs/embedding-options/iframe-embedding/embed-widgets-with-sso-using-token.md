---
layout: post
title: Widget iFrame Embedding with SSO using Token | Bold BI Docs
description: Learn how to embed a dashboard's widget in view mode using iFrame with Single Sign-on (SSO) using token authentication. Also, find a sample to download.
platform: bold-bi
documentation: ug
---

# Embed Widget with SSO using Token

Bold BI supports embedding the widgets with iFrame based Single Sign-On(SSO) using token based authentication.

## How to get the Embed Widget Url

1. Open the desired dashboard and select the `More` option under the widget you want to embed .Then, select `Get Embed Code` from the drop-down menu.
   ![InspectElement](/static/assets/iFrame-based/images/Widget-GetEmbedCode.png)

2. Copy the iframe code from the embed code pop-up page. 
   ![InspectElement](/static/assets/iFrame-based/images/WidgetId.png) 

## Create the embed URL to View Dashboard

The embed URL should be in the following format.

`{dashboard URL}/{embed parameters}&embed_signature={signature}`

Please find the details of the parameter in the URL as follows. 

<table>
<tr>
<td style="width: 23%"><strong>Parameter</strong></td>
<td style="width: 77%"><strong>Description</strong></td>
</tr>

<tr>
<td>dashboard URL</td>
<td>URL of the dashboard widget to be embed. Refer this <a href="/embedding-options/iframe-embedding/embedding-a-widget/">link</a> to get the URL. 
<code>

```js
Example:
https://test.boldbi.com/bi/en-us/site/site1/dashboards/8428c9d9-85db-418c-b877-ea4495dcddd7/Predictive%20Analytics/Personal%20Expense%20Analysis?isWidgetMode=true&widgetId=0000aeab-3359-40c6-b014-1ea98e9a7ce9&
```

</code> </td>
</tr>

<tr>
<td>embed parameters</td>
<td><strong>Mandatory Parameters</strong> to embed the widget with token based authentication.
<table>

<tr>
<td>embed_nonce</td>
<td>Random GUID string that restricts the URL reconstruction or attacks from the hackers.</td>
<td><code>3e253410-1a82-4fb3-a337-122a8007dafc</code></td>
</tr>

<tr>
<td>embed_user_email</td>
<td>User email id.</td>
<td>admin@domain.com</td>
</tr>

</table>

<code>

```js
Example:
embedParameter="embed_nonce=3e253410-1a82-4fb3-a337-122a8007dafc&embed_user_email=admin@domain.com"
```
</code> </td>
</tr>

<tr>
<td>embed signature</td>
<td>This embed signature is generated by encrypting the <strong>above embedParameters</strong> query string using the `HMACSHA256` algorithm. <br/>
<b>Note:</b>Embed signature is different from the Embed Secret key. Both are not same. <code>

```js
Example:
embed_signature=VYrDMVX4h85PrRBKX9mystRHYkU8z+HVC9bkVMc2qGY=
```

</code></td>
</tr>
</table>

The following embed URL is the formation of the <strong>dashboard URL</strong>, <strong>embed parameters</strong>, and <strong>embed signature</strong>

<table>
<tr><td>Example: https://test.boldbi.com/bi/en-us/site/site1/dashboards/8428c9d9-85db-418c-b877-ea4495dcddd7/Predictive%20Analytics/Personal%20Expense%20Analysis?isWidgetMode=true&widgetId=0000aeab-3359-40c6-b014-1ea98e9a7ce9&embed_nonce=3e253410-1a82-4fb3-a337-122a8007dafc&embed_user_email=admin@domain.com&embed_signature=VYrDMVX4h85PrRBKX9mystRHYkU8z+HVC9bkVMc2qGY=</td></tr>

</table>

> **NOTE:** The generated Iframe signature URL is valid for an indefinite amount of time because the embed_timestamp and embed_expirationtime parameters are optional parameters. If you want to set the default 6 days validity period for the generated iframe URL, use the embed_timestamp.

### Optional Embed Parameters

Please find the optional widget in the embed parameter specifications below. Here, you may find the `EmbedProperties` for the dashboard.

<table style="width: 100%">

<tr>
<td style="width: 30%"><strong>Parameter</strong></td>
<td style="width: 40%"><strong>Description</strong></td>
<td style="width: 30%"><strong>Example</strong></td>
</tr>

<tr>
<td><code>embed_timestamp</code></td>
<td>A UNIX timestamp of the current time. This is used to verify that the embed URL was established within the last 6 days.<br><code>double unixTimestamp = (DateTime.UtcNow - new DateTime(1970, 1, 1)).TotalSeconds.</code></td>
<td>1583934776</td>
</tr>

<tr>
<td><code>embed_expirationtime</code></td>
<td>Decide how long the token will remain active than default 6 days. It has to be portrayed in seconds. The time ranges from 86400 seconds (one day) to 518400 seconds (six days).
If you want to set embed_expirationtime, you must set the embed_timestamp too in the URL generation.</td>
<td>518400</td>
</tr>

<tr>
<td><code>isWidgetMode</code></td>
<td>To enable the widget mode.</td>
<td>true</td>
</tr>

<tr>
<td><code>widgetId</code></td>
<td>Widget Id of the dashboard widget to be embedded. To know how to get widgetId from the dashboard, <a href="/embedding-options/iframe-embedding/embedding-a-widget/">here</a>
</td>
<td>0000aeab-3359-40c6-b014-1ea98e9a7ce9</td>
</tr>

<tr>
<td><code>embed_dashboard_export</code></td>
<td>The export option to various formats of the dashboard and widget in the embedded dashboard is displayed based on this value. The default value is <strong>true</strong>. To disable or hide the export icon from the toolbar, you can set the value of the <strong>embed_dashboard_export</strong> parameter to false.</td>
<td>true</td>
</tr>

<tr>
<td><code>embed_widget_comments</code></td>
<td>The actions related to comments such as post, edit, delete, reply, posting the image, and user mention list options, can be performed in widgets based on this value. The default value is <strong>true</strong>. To disable or hide the dashboard comments icon from the toolbar, you can set the value of the <strong>embed_dashboard_comments</strong> parameter to false. </td>
<td>true</td>
</tr>

<tr>
<td><code>hide_widget_tool</code></td>
<td>This value allows you to show the widget icons in the widget header. To hide specific widget icons from the widget header, you can set the value for the <strong>hide_widget_tool</strong> parameter with predefined values that correspond to each icon in the widget header. <br/>

<b>Note:</b> Predefined values: <code>`fr-Filter,fs-FullScreen,om-Option Menu`</code></td>
<td>string. <code>

```js
Example:
hide_widget_tool= "fr,fs,om".
```
</code></td>
</tr>

</table>

## Sample application for Embed Widget with SSO using Token

Please get the [Embed Widget with SSO using Token](https://github.com/boldbi/iframe-token-based-authorization-sample/tree/master/WidgetEmbedding) sample from GitHub.

## Generating the embed signature for the embed URL

<strong>Embed parameters</strong> and the [Embed Secret Key](https://help.boldbi.com/site-administration/embed-settings/#get-embed-secret-code) are mandatory parameters used for generating the <strong>Embed Signature</strong>

> We have provided the code sample to generate the signature in C#. You can write the equivalent code in your platform language.
      
  ```js
      var embedParameters = "embed_nonce=55a1c8f4-5015-487d-8463-d3ebeae655fd&embed_user_email=admin@domain.com";
      var embedSecretKey = "7tFaq2zidmxJN8Pid6IUAiGFqAUwMfK"; //https://help.boldbi.com/site-administration/embed-settings/#get-embed-secret-code

      public string GetSignatureUrl(string embedParameters, string embedSecretKey)
      {
         var encoding = new System.Text.UTF8Encoding();
         var keyBytes = encoding.GetBytes(embedSecretKey);
         var messageBytes = encoding.GetBytes(embedParameters);
         using (var hmacsha = new HMACSHA256(keyBytes))
         {
          var embedSignature = hmacsha.ComputeHash(messageBytes);
          return Convert.ToBase64String(embedSignature);
          // For eg, embedSignature = VYrDMVX4h85PrRBKX9mystRHYkU8z+HVC9bkVMc2qGY=
         }
      }
 ```

  `Embed Signature` refers to a hashed value that is generated for authentication purposes in an embed request sent to the Bold BI server. To obtain the `embedSignature`, the embedParameters(contains `dashboardid`, `widgetid`, `user email` and `other parameters`) and embedSecretKey are passed as arguments to the `GetSignatureUrl` method. This method generates the hashed signature using the HMACSHA256 algorithm, which should be appended to the existing iframe URL as a query parameter named <strong>‘embed_signature’</strong>.
